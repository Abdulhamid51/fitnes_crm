{% extends 'wrapper.html' %}
{% block content %}
<link rel="stylesheet" href="/static/assets/example/css_final.css">
<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css">

<main id="main" class="main">


<div class="pagetitle">
    <h1>Davomat</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="index.html">Asosiy sahifa</a></li> 
        <li class="breadcrumb-item">Davomat</li>
        <li class="breadcrumb-item active">Davomat kiruvchilar royhati</li>
      </ol>
    </nav>
  </div><!-- End Page Title -->

    

    <div class="container">
        
        <!-- <div class="outer-wrapper">
            <div class="table-wrapper"> -->
                <div class="row">
                    <div class="col-md-12">
                
                        <input type="text" name=""  id="search" placeholder="Search.." style="padding: 5px; width: 100%;">
    <table id="emp-table" class="table table-border datab" style="width:100%">

        
        <thead class="p-4">
            
            <th col-index = 1 >Ism Familya</th>
            <th col-index = 2>
                <select  class="table-filter  form-select" onchange="filter_rows()">
                    <option value="all">Barcha tariflar</option>
                </select>
            </th>

            <th col-index = 3>
                <select class="table-filter form-select" onchange="filter_rows()">
                    <option value="all">Barcha statuslar</option>
                </select>
            </th>
            <th col-index = 4>
                <select class="table-filter form-select" onchange="filter_rows()">
                    <option value="all">Barcha to'lovlar</option>
                </select>
            </th>
            <th>Telefon raqam</th>
            <th>Davomat</th>
            
            <!-- <th col-index = 5>Office
                <select class="table-filter" onchange="filter_rows()">
                    <option value="all"></option>
                </select>
            </th> -->
            
        </thead>

        <tbody class="p-4">
            {% for c in clients %}
            <tr>
                <td>{{ forloop.counter }}. <a href="{% url 'main:detail' c.id %}">{{ c.name }}</a></td>   
                <td>{{ c.coming_type }}</td>
                
                <td class="
                {% if c.status == "ACTIVE" %}
                text-success
                {% elif c.status == "INACTIVE" %}
                text-danger
                {% else %}
                text-warning
                {% endif %}">{{ c.status }}
                </td>

                <!-- <td class="badge bg-danger">{{ c.status }}</td> -->
                <td
                {% if c.debt == False %}
                class="text-success">To'langan
                {% else %}
                class="text-danger">To'lanmagan
                {% endif %}
                </td>

                <td>{{ c.phone }}</td>
                <td>  <button class="icons" type="button"  data-dismiss="alert" aria-label="Close" >
                    <span class="checking{% if user.today_came == 'today_came' %} checked_icon {% else %} check_icon {% endif %}" data-id="{{ user.pk }}" aria-hidden="true" ><i class=" fa-solid fa-check"></i></span>
                    <span class="attendance_btn attendance_icon"  data-id="{{ user.pk }}" aria-hidden="true" ><i class="fa-solid fa-plus"></i></span>
                  </button>
                </td>
                <!-- <td>Site 1</td> -->
            </tr>
            {% endfor %}

            

        </tbody>
    </table>

    
   
        
    <!-- <script>getUniqueValuesFromColumn()
    </script> -->
    <script src="/static/assets/example/filter.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    
    <script src="//cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
    <script>
        window.onload = () => {
            console.log(document.querySelector("#emp-table > tbody > tr:nth-child(1) > td:nth-child(2) ").innerHTML);
        };

        getUniqueValuesFromColumn()
        

        var $rows = $('#emp-table tr');
        $('#search').keyup(function() {
            var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();

            console.log(val)
            
            $rows.show().filter(function() {
                var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
                return !~text.indexOf(val);
            }).hide();
        });
                
       
    </script>
   


    <style>
        .dataTable-search{
            width: 100%;
            margin-bottom: 25px;
            
        }

       

                
        
    </style>
 
</div>
</div>
<!-- </div>
</div> -->

</div>


</main>


{% endblock content %}

